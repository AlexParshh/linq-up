{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\linq-up\\\\src\\\\components\\\\Application.jsx\";\nimport React, { Component, StrictMode } from \"react\";\nimport PersonList from './PersonList';\nimport Person from './Person';\nimport fetch from \"cross-fetch\";\nimport MapContainer from \"./Map\";\nlet xxx;\nlet yyy;\nconsole.log(navigator.geolocation.getCurrentPosition(() => this, yyy));\n\nclass Application extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      apiKey: \"&key=AIzaSyAF6LzDWnCO0yQ3_xVfXMYicN6MqUFl4q0\",\n      people: [/*#__PURE__*/React.createElement(Person, {\n        key: \"1\",\n        value: \"1\",\n        onSetAddress: (e, v) => this.handleSetAddress(e, v),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Person, {\n        key: \"2\",\n        value: \"2\",\n        onSetAddress: (e, v) => this.handleSetAddress(e, v),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Person, {\n        key: \"3\",\n        value: \"3\",\n        onSetAddress: (e, v) => this.handleSetAddress(e, v),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 13\n        }\n      })],\n      addresses: [\"\", \"\", \"\"],\n      coords: [],\n      midPoint: \"\",\n      currentLocation: []\n    };\n\n    this.handleSetAddress = (e, v) => {\n      let newAddresses = this.state.addresses.slice();\n      newAddresses[v - 1] = e;\n      this.setState({\n        addresses: newAddresses\n      });\n    };\n\n    this.setLocation = async () => {};\n\n    this.emptyChecker = () => {\n      const a = this.state.addresses;\n\n      for (let i of a) {\n        if (i === \"\") {\n          return true;\n        }\n\n        ;\n      }\n\n      ;\n      return false;\n    };\n\n    this.handleAddPerson = () => {\n      this.resetMidPoint();\n      let newAddresses = [...this.state.addresses, \"\"];\n      this.setState({\n        addresses: newAddresses\n      });\n      this.setState({\n        people: [...this.state.people, /*#__PURE__*/React.createElement(Person, {\n          key: this.state.people.length + 1,\n          value: this.state.people.length + 1,\n          onSetAddress: (e, v) => this.handleSetAddress(e, v),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }\n        })]\n      });\n    };\n\n    this.handleDeletePerson = () => {\n      this.resetMidPoint();\n      let newAddresses = this.state.addresses.slice(0, -1);\n      this.setState({\n        addresses: newAddresses\n      });\n      let people = this.state.people.slice(0, -1);\n      this.setState({\n        people: people\n      });\n    };\n\n    this.stringParser = a => {\n      let b = a.split(\" \");\n      let newString = \"\";\n\n      for (let i = 0; i < b.length; i++) {\n        newString += b[i] + \"%20\";\n      }\n\n      return newString.slice(0, -3);\n    };\n\n    this.convertToCoords = async () => {\n      const all = this.state.addresses;\n      const url = \"https://maps.googleapis.com/maps/api/geocode/json?address=\";\n      const apiKey = this.state.apiKey;\n      let fullUrl;\n      let newCoords = [];\n      let a;\n\n      for (let i = 0; i < all.length; i++) {\n        fullUrl = url + all[i] + apiKey;\n        a = await this.getCoords(fullUrl);\n        newCoords.push(a);\n      }\n\n      this.setState({\n        coords: newCoords\n      });\n    };\n\n    this.findMidPoint = coordsList => {\n      if (coordsList.length === 2) {\n        let lat1 = coordsList[0].lat * (Math.PI / 180);\n        let lat2 = coordsList[1].lat * (Math.PI / 180);\n        let lon1 = coordsList[0].lng * (Math.PI / 180);\n        let lon2 = coordsList[1].lng * (Math.PI / 180);\n        let bx = Math.cos(lat2) * Math.cos(lon2 - lon1);\n        let by = Math.cos(lat2) * Math.sin(lon2 - lon1);\n        let latMid = Math.atan2(Math.sin(lat1) + Math.sin(lat2), Math.sqrt((Math.cos(lat1) + bx) ** 2) + by ** 2);\n        let lonMid = lon1 + Math.atan2(by, Math.cos(lat1) + bx);\n        return [latMid * (180 / Math.PI), lonMid * (180 / Math.PI)];\n      }\n\n      ; //Two or more addresses\n\n      const formatter = x => {\n        //Converting from degrees to radians\n        let lat1 = x.lat * (Math.PI / 180);\n        let lon1 = x.lng * (Math.PI / 180); //Converting to cartesian coords\n\n        let x1 = Math.cos(lat1) * Math.cos(lon1);\n        let y1 = Math.cos(lat1) * Math.sin(lon1);\n        let z1 = Math.sin(lat1);\n        return [x1, y1, z1];\n      };\n\n      let formatted = [];\n\n      for (let i of coordsList) {\n        formatted.push(formatter(i));\n      }\n\n      let tmp;\n      let newResult = [];\n\n      for (let i = 0; i < formatted.length; i++) {\n        tmp = 0;\n\n        for (let j of formatted) {\n          tmp += j[i];\n        }\n\n        newResult.push(tmp / formatted.length);\n      } //newResult is now in format[x,y,z]\n\n\n      let lon = Math.atan2(newResult[1], newResult[0]);\n      let hyp = Math.sqrt(newResult[0] ** 2 + newResult[1] ** 2);\n      let lat = Math.atan2(newResult[2], hyp); //converting back to degrees\n\n      lat = lat * (180 / Math.PI);\n      lon = lon * (180 / Math.PI);\n      return [lat, lon];\n    };\n\n    this.calculator = async () => {\n      //check if empty addresses\n      if (this.emptyChecker()) {\n        this.setState({\n          midPoint: \"error\"\n        });\n        return null;\n      }\n\n      if (this.state.addresses.length < 2) {\n        this.setState({\n          midPoint: \"error\"\n        });\n        return null;\n      }\n\n      await this.convertToCoords();\n      let midPoint = await this.findMidPoint(this.state.coords);\n      this.setState({\n        midPoint: midPoint\n      });\n      return this.state.midPoint;\n    };\n\n    this.resetMidPoint = () => {\n      this.setState({\n        midPoint: []\n      });\n    };\n  }\n\n  async getCoords(link) {\n    const res = await fetch(link);\n    const data = await res.json();\n    return data['results'][0].geometry.location;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, \"Linq\"), /*#__PURE__*/React.createElement(PersonList, {\n      people: this.state.people,\n      onAddPerson: () => this.handleAddPerson(),\n      onDeletePerson: () => this.handleDeletePerson(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.calculator,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 22\n      }\n    }, \"Calculate\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, this.state.midPoint), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MapContainer, {\n      coords: this.state.coords,\n      midpoint: this.state.midPoint,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 22\n      }\n    })));\n  }\n\n}\n\nexport default Application;","map":{"version":3,"sources":["C:/Users/Alex/linq-up/src/components/Application.jsx"],"names":["React","Component","StrictMode","PersonList","Person","fetch","MapContainer","xxx","yyy","console","log","navigator","geolocation","getCurrentPosition","Application","state","apiKey","people","e","v","handleSetAddress","addresses","coords","midPoint","currentLocation","newAddresses","slice","setState","setLocation","emptyChecker","a","i","handleAddPerson","resetMidPoint","length","handleDeletePerson","stringParser","b","split","newString","convertToCoords","all","url","fullUrl","newCoords","getCoords","push","findMidPoint","coordsList","lat1","lat","Math","PI","lat2","lon1","lng","lon2","bx","cos","by","sin","latMid","atan2","sqrt","lonMid","formatter","x","x1","y1","z1","formatted","tmp","newResult","j","lon","hyp","calculator","link","res","data","json","geometry","location","render"],"mappings":"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","sourcesContent":["import React, { Component, StrictMode } from \"react\";\r\nimport PersonList from './PersonList';\r\nimport Person from './Person';\r\nimport fetch from \"cross-fetch\";\r\nimport MapContainer from \"./Map\";\r\n\r\n\r\nlet xxx\r\nlet yyy\r\nconsole.log(navigator.geolocation.getCurrentPosition(()=>this,yyy))\r\n\r\n\r\nclass Application extends Component {\r\n\r\n    \r\n    state = { \r\n\r\n        apiKey: \"&key=AIzaSyAF6LzDWnCO0yQ3_xVfXMYicN6MqUFl4q0\",\r\n\r\n        people: [\r\n            <Person key=\"1\" value=\"1\" onSetAddress = {(e,v) =>this.handleSetAddress(e,v)}></Person>,\r\n            <Person key=\"2\" value=\"2\" onSetAddress = {(e,v) =>this.handleSetAddress(e,v)}></Person>,\r\n            <Person key=\"3\" value=\"3\" onSetAddress = {(e,v) =>this.handleSetAddress(e,v)}></Person>,\r\n          ],\r\n        addresses: [\r\n            \"\",\"\",\"\"\r\n        ],\r\n\r\n        coords: [],\r\n\r\n        midPoint: \"\",\r\n\r\n        currentLocation: [],\r\n\r\n        \r\n     }\r\n\r\n    handleSetAddress = (e,v) => {\r\n        let newAddresses = this.state.addresses.slice();\r\n        newAddresses[v-1] = e;\r\n        this.setState({addresses:newAddresses});\r\n\r\n    }\r\n\r\n    setLocation = async() => {\r\n\r\n\r\n\r\n    }\r\n\r\n    emptyChecker = () => {\r\n        const a = this.state.addresses;\r\n\r\n        for (let i of a) {\r\n            if (i === \"\") {\r\n                return true;\r\n            };\r\n        };\r\n\r\n        return false;\r\n    }\r\n\r\n    handleAddPerson = () => {\r\n        this.resetMidPoint();\r\n        let newAddresses = [...this.state.addresses,\"\"];\r\n        this.setState({addresses:newAddresses});\r\n        this.setState({\r\n          people: [\r\n            ...this.state.people,\r\n            <Person\r\n              key={this.state.people.length + 1}\r\n              value={this.state.people.length + 1}\r\n              onSetAddress = {(e,v) =>this.handleSetAddress(e,v)}\r\n            ></Person>,\r\n          ],\r\n        });\r\n      };\r\n\r\n    handleDeletePerson = () => {\r\n        this.resetMidPoint();\r\n        let newAddresses = this.state.addresses.slice(0,-1);\r\n        this.setState({addresses:newAddresses});\r\n        let people = this.state.people.slice(0, -1);\r\n        this.setState({\r\n          people: people,\r\n        });\r\n      };\r\n\r\n    \r\n    stringParser = a => {\r\n\r\n        let b = a.split(\" \");\r\n        let newString = \"\";\r\n\r\n        for (let i =0; i<b.length;i++){\r\n            newString += b[i] + \"%20\";\r\n        }\r\n\r\n        return newString.slice(0,-3);\r\n    }\r\n\r\n\r\n    async getCoords(link) {\r\n\r\n        const res = await fetch(link);\r\n        const data = await res.json();\r\n\r\n        return data['results'][0].geometry.location;\r\n    }\r\n\r\n\r\n    convertToCoords = async () => {\r\n\r\n        const all = this.state.addresses;\r\n        const url = \"https://maps.googleapis.com/maps/api/geocode/json?address=\";\r\n        const apiKey = this.state.apiKey;\r\n\r\n        let fullUrl;\r\n\r\n        let newCoords = [];\r\n        let a;\r\n\r\n        for (let i = 0; i<all.length;i++) {\r\n            fullUrl = url+all[i]+apiKey;\r\n            a = (await this.getCoords(fullUrl));\r\n            newCoords.push(a);\r\n        }\r\n\r\n        this.setState({coords:newCoords});\r\n\r\n    }\r\n\r\n\r\n    findMidPoint = (coordsList) => {\r\n\r\n        if (coordsList.length === 2) {\r\n\r\n            let lat1 = coordsList[0].lat*(Math.PI/180);\r\n            let lat2 = coordsList[1].lat*(Math.PI/180);\r\n            let lon1 = coordsList[0].lng*(Math.PI/180);\r\n            let lon2 = coordsList[1].lng*(Math.PI/180);\r\n\r\n\r\n            let bx = Math.cos(lat2) * Math.cos(lon2-lon1);\r\n            let by = Math.cos(lat2) * Math.sin(lon2-lon1);\r\n\r\n            let latMid = Math.atan2((Math.sin(lat1) + Math.sin(lat2)), Math.sqrt((Math.cos(lat1)+bx)**2)+(by**2));\r\n            let lonMid = lon1 + Math.atan2(by,(Math.cos(lat1)+bx));\r\n\r\n            return [latMid*(180/Math.PI),lonMid*(180/Math.PI)];\r\n\r\n        };\r\n\r\n\r\n\r\n\r\n        //Two or more addresses\r\n        \r\n        const formatter = (x) => {\r\n\r\n            //Converting from degrees to radians\r\n            let lat1 = x.lat*(Math.PI/180);\r\n            let lon1 = x.lng*(Math.PI/180);\r\n            //Converting to cartesian coords\r\n\r\n            let x1 = Math.cos(lat1) * Math.cos(lon1);\r\n            let y1 = Math.cos(lat1) * Math.sin(lon1);\r\n            let z1 = Math.sin(lat1);\r\n\r\n            return [x1,y1,z1];\r\n\r\n        }\r\n\r\n        let formatted = [];\r\n\r\n        for (let i of coordsList) {\r\n            formatted.push(formatter(i))\r\n        }\r\n\r\n\r\n\r\n\r\n        let tmp;\r\n        let newResult = [];\r\n\r\n        for (let i = 0; i<formatted.length;i++) {\r\n            tmp = 0\r\n            for (let j of formatted) {\r\n\r\n                tmp += j[i]\r\n            }\r\n\r\n            newResult.push(tmp/formatted.length)\r\n\r\n        }\r\n\r\n\r\n\r\n        //newResult is now in format[x,y,z]\r\n\r\n        let lon = Math.atan2(newResult[1],newResult[0]);\r\n        let hyp = Math.sqrt(((newResult[0])**2) + ((newResult[1])**2));\r\n        let lat = Math.atan2(newResult[2],hyp);\r\n\r\n        //converting back to degrees\r\n        lat = lat * (180/Math.PI);\r\n        lon = lon * (180/Math.PI);\r\n\r\n        return [lat,lon];\r\n\r\n    }\r\n\r\n    calculator = async () => {\r\n\r\n        //check if empty addresses\r\n        if (this.emptyChecker()) {\r\n            this.setState({midPoint:\"error\"})\r\n            return null;\r\n        }\r\n\r\n        if (this.state.addresses.length < 2){\r\n            this.setState({midPoint:\"error\"})\r\n            return null;\r\n        }\r\n        await this.convertToCoords();\r\n        let midPoint = (await this.findMidPoint(this.state.coords));\r\n        this.setState({midPoint:midPoint});\r\n\r\n        return this.state.midPoint;\r\n\r\n    }\r\n\r\n    resetMidPoint = () => {\r\n        this.setState({midPoint:[]})\r\n    }\r\n\r\n\r\n    render() { \r\n        return ( \r\n\r\n            <div>\r\n                <h1>Linq</h1>\r\n                <PersonList\r\n                people = {this.state.people} \r\n                onAddPerson = {()=>this.handleAddPerson()}\r\n                onDeletePerson = {()=>this.handleDeletePerson()}></PersonList>\r\n\r\n                <div><button onClick={this.calculator}>Calculate</button></div>\r\n                <br/>\r\n                <div>{ this.state.midPoint }</div>\r\n\r\n                <div><MapContainer\r\n                coords={this.state.coords}\r\n                midpoint={this.state.midPoint}\r\n                ></MapContainer>\r\n                </div>\r\n                \r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Application;"]},"metadata":{},"sourceType":"module"}